{# Shared workflow header/nav for Estimator suite #}
{# Expects: current_step in {'estimator','adjustments','dje','summary'} #}

{% set title_map = {
  'estimator':  'Material Entry Form',
  'adjustments':'Labor Adjustments',
  'dje':        'DJE Entry Form',
  'summary':    'Summary Sheet'
} %}

{% set reset_id_map = {
  'estimator':  'estimatorResetBtn',
  'adjustments':'resetAdjustmentsPageBtn',
  'dje':        'djeResetBtn',
  'summary':    'resetAllBtn'
} %}

{% set title = title_map.get(current_step, 'Material Entry Form') %}
{% set reset_id = reset_id_map.get(current_step, 'estimatorResetBtn') %}

<div class="section-title flex-header workflow-nav wf-fixed bg-body">
  <!-- Left: page title -->
  <div class="wf-left">
    <span class="wf-title">{{ title }}</span>
  </div>

  <!-- Center: workflow links (perfectly centered between left and right) -->
  <div class="wf-center">
    <nav aria-label="Estimator workflow" class="wf-crumbs">
      <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item">
          <a href="{{ url_for('estimator.estimator_home') }}"
             {% if current_step == 'estimator' %}aria-current="page"{% endif %}>Material</a>
        </li>
        <li class="breadcrumb-item">
          <a href="{{ url_for('estimator.estimator_adjustments') }}"
             {% if current_step == 'adjustments' %}aria-current="page"{% endif %}>Adjustments</a>
        </li>
        <li class="breadcrumb-item">
          <a href="{{ url_for('estimator.estimator_dje') }}"
             {% if current_step == 'dje' %}aria-current="page"{% endif %}>DJE</a>
        </li>
        <li class="breadcrumb-item">
          <a href="{{ url_for('estimator.estimator_summary') }}"
             {% if current_step == 'summary' %}aria-current="page"{% endif %}>Summary</a>
        </li>
      </ol>
    </nav>
  </div>

   <!-- Right: manage + save + reset -->
  <div class="wf-right d-flex align-items-center gap-2">
    {% if current_step == 'estimator' %}
      <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('libraries.materials') }}">Manage Materials</a>
      <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('admin.list_assemblies') }}">Manage Assemblies</a>
    {% elif current_step == 'dje' %}
      <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('libraries.dje') }}">Manage DJE Items</a>
    {% endif %}

    <button id="workflowSaveBtn" type="button" class="btn btn-sm btn-success">
      {% include "_includes/icons/save.svg" %}
      <span>Save</span>
    </button>

    <button id="{{ reset_id }}" type="button" class="btn btn-sm btn-primary">
      {% include "_includes/icons/reset.svg" %}
      <span>Reset</span>
    </button>
  </div>

</div>
<div class="workflow-nav-spacer" aria-hidden="true"></div>

